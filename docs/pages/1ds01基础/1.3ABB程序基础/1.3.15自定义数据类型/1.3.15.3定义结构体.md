# 1.3.15.3 定义结构体

结构体其实是一个聚合体，用户可以对这个聚合体进行命名和自定义。结构体由一些数值类型组成的复合体，这个复合体可以是原子类型或者另一个结构体**。**

RAPID内置的大家熟悉的记录类型就有很多比如的“Pos”，“Orient”，“Pose”这些都是记录类型。当然用户也可以自定义结构体。

比如“Pos”在RPAPID中表示三维空间坐标里面的一个点或者表示一个三维向量,”Pos”包含三个组成部分[x,y,z]。如下面表格9-1所示：

| Component | Data type | Description                  |
| --------- | --------- | ---------------------------- |
| x         | num       | x-axis component of position |
| y         | num       | y-axis component of position |
| z         | num       | z-axis component of position |

表9-1

我们在看一看“Pos”的语法数据结构：

```text
< dataobject of pos >
< x of num >
< y of num >
< z of num >
```

结合语法结构和表9-1的描述，我们可以很好的理解“Pos”。Pos结构体由三个基本的“Num”类型的数据组成。

当然我们对结构的自定义可以由更多的组合，我们可以结合自己的实际需求来定义我们的结构体。

比如：我们想定义一个结构体来某个产品的基本信息（产品类型，二维码，重量）我们可以像下面一样定义：

```text
RECORD Product
    num Type;
    String BarCode;
    Dnum Weight;
ENDRECORD
```


我们可以发现自定义结构体非常简单，我们使用关键字“RECORD“和”ENDRECORD“，两个关键字的中间写入我们自定义的数据，显示变量类型然后是变量名称，最后用”;“结束。

这里大家需要知道的结构体的申明需要在每个模块的最前面编写。

虽然我们RAPID相比高级语言没有一些Class指针这些高级语言的特性但是依然不影响我们使用数据化和面向对象的编程技巧。我们利用记录类型（机构体）对我们面对的实际问题和场景抽象出对应的数据结构再配合上合理的函数结构可以让我们的代码更好的体验业务逻辑和更加顺畅的实现业务需求。

下面的环节就是整篇文章的重要的部分，首先我们假设一个场景，现在有一个码垛的应用场景，客户有一批箱子从流水线上一个个流出来，通过视觉已经检测出每个箱子的种类，每个种类的箱子有着固定的尺寸，但是不同的箱子尺寸各不相同，现在需求是，客户要求把这些箱子进行一一堆叠没错就是有点像叠叠乐，把这些箱子全部一个个摞起来相比复杂的叠叠乐，我们假设的场景可能更简单一点。

好的，需求场景已经有了，下面就是开始写程序了，有了前面的及章节的介绍和经验，你已经知道大致程序怎么写了：每个箱子通过IF或者TEST语句判断，然后直接放置到之前记录的坐标点的位置，并且添加上箱子的高度信息，就可以计算出堆放的得高度信息。这样我们就满足的该场景下最基本的功能了。

这时候客户说了，我现在需要添加新的箱子种类，这时候你依然可以应对，无非就是多写几个IF的语句就行。这时候客户又添加新需求：我想要你把箱子以后可以一个个从上面取出来。项目瞬间从叠叠乐，变成了“消消乐”，如果你感觉你还能应对，现在客户要求我能知道每个叠叠乐中箱子的数量等信息，流水线上箱子的状态等等各种额外的小需求就来了。

如果出现这么多的需求的时候，可能有些读者朋友就感觉有些棘手了。不知道从何下手，其实不要慌，这时候数据结构的意义就出现了，设计一种好的数据结构对解决实际的问题有着事半功倍的效果。

针对这个场景我们需要设计一款贴合这个场景的数据结构。

首先一个箱子竟然涉及堆叠就需要有箱子的高度，那我们就索性把箱子的长宽高设计一个结构体，好的我们就把他加入我们的数据结构里面，分别是：Length，Width，Height，都是Num类型。

然后是箱子的类型属性，好的我们也加入的我们的数据结构里面，就叫他Type吧，用String类型定义。

有了长宽高，和类型，我们话要设计一个保留属性，这个属性其实就是为了我们以后扩展用的，我就简单用String Value，来定义他。有了这些属性我们就可以设计我们的结构体了。

```text
MODULE BoxDataModule
 RECORD Box
     string Type;
     num Length;
     num Width;
     num Height;
     string value;
 ENDRECORD
ENDMODULE
```

上面的这几行简单的代码就把一个现实中的箱子的实体，给程序化数据化了。里面Type表示箱子的类型，Length表示箱子的长度，Width表示箱子的宽度，Height表示箱子的高度，value是我的习惯凡是给自己留一手后门，以后总会有作用。

在看看这个ABB机器人编程环境下的结构体，其实就是用了”RECORD”和“ENDRECORD”的关键字在里面用最基本的数据类型填充的一个结构体。
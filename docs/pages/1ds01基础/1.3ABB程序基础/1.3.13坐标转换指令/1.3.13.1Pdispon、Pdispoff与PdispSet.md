# 1.3.13.1 Pdispon、Pdispoff与PdispSet

1.pdispon

当前指令可以使机器人座标通过编程进行即时转换，通常用于水切割等运行轨迹保持不变的场合，可以快捷的完成工作位置修正。

```
PDispOn [\Rot][\ExeP,] ProgPoint, Tool [\WObj];

[\Rot]:	座标旋转开关。( switch ) 
[\ExeP]:运行起始点。( robtarget ) 
ProgPoint:座标原始点。( robtarget ) 
Tool:工具座标系。( tooldata ) 
[\Wobj]:工件座标系。( wobjdata ) 
```

实例1：

```
PDispOn\ExeP:=p10,p20,tool1;
```

![](picture\pdisp.png)

座标从p20位置向p10位置偏移，偏移距离即p20与p10两点的差

实例2：

```
PDispOn\Rot\ExeP:=p10,p20,tool1;
```

![](picture\pdisp2.png)

\rot开启座标旋转，偏移座标根据p10点和p20点的不同角度进行旋转。

实例3：

```
PROC draw_square()
  PDispOn *,tool1;不使用参变量[\exep]则机器人默认为当前点
  MoveL *,v500,z10,tool1;
  MoveL *,v500,z10,tool1;
  MoveL *,v500,z10,tool1;
  MoveL *,v500,z10,tool1;
  PDispOff;
ENDPROC

MoveL p10,v500,fine\Inpos:=inpos50,tool1;到p10点画正方形
draw_square;
MoveL p20,v500,fine\Inpos:=inpos50,tool1;到p20点画正方形
draw_square;
MoveL p30,v500,fine\Inpos:=inpos50,tool1;到p30点画正方形
draw_square;
```

![](picture\pdisp3.png)



2.pdispoff

当前指令用于使机器人通过编程达到的座标转换功能失效，必须与指令** PDispOn 或指令 PDispSet 同时使用。

实例：

```
MoveL p10,v500,z10,tool1;座标转换失效
PDispOn\ExeP:=p10,p11,tool1;
MoveL p20,v500,z10,tool1;座标转换生效
MoveL p30,v500,z10,tool1;座标转换生效
PDispOff;
MoveL p40,v500,z10,tool1;座标转换失效
```



3.pdispset

当前指令通过输入座标偏差量，使机器人座标通过编程进行即时转换，通常用于水切割等运行轨迹保持不变的场合，可以快捷的完成工作位置修正。

```
PDispSet DispFrame;

DispFrame:座标偏差量。( pose )
```

实例：

```
VAR pose xp100:=[[100,0,0],[1,0,0,0]];

MoveL p10,v500,z10,tool1;
PDispSet xp100;
MoveL p20,v500,z10,tool1;
PDispOff;
MoveL p30,v500,z10,tool1;
```

![](picture\pdispset.png)

限制：

- 当前指令在使用后，机器人座标将被转换，直到使用指令 PDispOff 后才失效。
- 在下列情况下，机器人座标转换功能将自动失效：
  - 机器人系统冷启动。
  - 载入新机器人程序。
  - 程序重置 ( Start From Beginning )。